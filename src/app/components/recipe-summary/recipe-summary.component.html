<div class="container">
  <a
    [ngStyle]="current_styles"
    class="recipe-card"
    [ngClass]="dark_back ? 'recipe panel panel-default' : 'dark_background panel panel-default'"
    [routerLink]="['/recipes', recipe?.id]"
    [attr.aria-label]="recipe?.title ? 'View recipe: ' + recipe?.title : 'View recipe'"
  >
    
    <div class="panel-heading">
      <div class="recipe-header">
        <h3 class="panel-title">{{ recipe?.title }}</h3>
        <div class="recipe-badges">
          <span class="badge badge-category" *ngIf="recipe?.category">
            {{ recipe?.category }}
          </span>
          <span class="badge badge-difficulty" 
            [class.easy]="recipe?.difficulty === 'Easy'"
            [class.medium]="recipe?.difficulty === 'Medium'"
            [class.hard]="recipe?.difficulty === 'Hard'">
            {{ recipe?.difficulty || 'Medium' }}
          </span>
        </div>

        <button
          *ngIf="auth.isLoggedIn()"
          type="button"
          class="save-button"
          (click)="toggleSaved($event)"
          [attr.aria-pressed]="favorites.isSaved(recipe?.id)"
          [attr.aria-label]="favorites.isSaved(recipe?.id) ? 'Unsave recipe' : 'Save recipe'"
        >
          {{ favorites.isSaved(recipe?.id) ? 'Saved' : 'Save' }}
        </button>
      </div>
    </div>
    
    <div class="panel-body">
      <p>{{ recipe?.description }}</p>
      
      <div class="cover-photo-holder">
        <img 
          [src]="recipe?.cover_photo || '/assets/empty-bowl.png'"
          [alt]="recipe?.title + ' cover photo'"
          loading="lazy"
        />
      </div>
      
      <div class="data_title">
        Preparation Time
        <span class="data_variable">{{recipe?.preparation_time}} min</span>
      </div>
      
      <div class="data_title">
        Serves
        <span>{{recipe?.feeds_this_many}} {{recipe?.feeds_this_many === 1 ? 'person' : 'people'}}</span>
      </div>
    </div>
  </a>
</div>
