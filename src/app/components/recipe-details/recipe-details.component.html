<div *ngIf="loading && !load_error" class="loading">
  <div class="loading-spinner"></div>
  <div>Loading recipe...</div>
</div>

<div *ngIf="load_error" class="error">
  <div class="error-icon">!</div>
  <h3>Error Loading Recipe</h3>
  <p>{{error_text}}</p>
  <a [routerLink]="['/recipes']" class="btn btn-primary" style="margin-top: 16px; display: inline-block;">
    Back to recipe list
  </a>
</div>

<div *ngIf="recipe() && !load_error && !loading" class="recipe panel panel-default">
  <div class="panel-heading">
    <div class="recipe-header">
      <h3 class="panel-title">{{ recipe()?.title }}</h3>
      <div class="recipe-badges">
        <span class="badge badge-category" *ngIf="recipe()?.category">
          {{ recipe()?.category }}
        </span>
        <span class="badge badge-difficulty" [class.easy]="recipe()?.difficulty === 'Easy'"
          [class.medium]="recipe()?.difficulty === 'Medium'"
          [class.hard]="recipe()?.difficulty === 'Hard'">
          {{ recipe()?.difficulty || 'Medium' }}
        </span>
      </div>
    </div>
  </div>
  
  <div class="panel-body">
    <p class="recipe-description">{{ recipe()?.description }}</p>
    
    <div class="cover-photo-holder">
      <img 
        [src]="recipe()?.cover_photo || '../assets/empty-bowl.png'"
        [alt]="recipe()?.title + ' cover photo'"
      />
    </div>
    
    <div class="recipe-meta">
      <div class="data_title">
        Preparation Time
        <span class="data_variable">{{recipe()?.preparation_time}} min</span>
      </div>
      <div class="data_title">
        Serves
        <span>{{recipe()?.feeds_this_many}} {{recipe()?.feeds_this_many === 1 ? 'person' : 'people'}}</span>
      </div>
    </div>

    <div class="ingredients">
      <div class="data_title">Ingredients</div>
      <ol>
        <li *ngFor="let ingredient of recipe()?.ingredients">
          <strong>{{ ingredient.name }}</strong>
          <span *ngIf="ingredient.quantity"> - {{ ingredient.quantity }} {{ ingredient.unit }}</span>
        </li>
      </ol>
    </div>

    <div class="instructions">
      <div class="data_title">Instructions</div>
      <ol>
        <li *ngFor="let instruction of recipe()?.instructions; let i = index">
          <div class="instruction-step">
            <div class="step-number">{{ i + 1 }}</div>
            <div class="step-content">
              <div class="step-text">{{ instruction.action }}</div>
              <img 
                *ngIf="instruction.photo" 
                [src]="instruction.photo.startsWith('http') ? instruction.photo : '/assets/images/' + instruction.photo"
                [alt]="'Step ' + (i + 1) + ' instruction photo'"
              />
            </div>
          </div>
        </li>
      </ol>
    </div>

    <div class="recipe-actions" *ngIf="recipe()?.id">
      <button class="btn btn-primary" (click)="goBack()">‚Üê Back</button>
      <button class="btn btn-danger" (click)="deleteRecipe()">Delete Recipe</button>
    </div>
  </div>
</div>
  